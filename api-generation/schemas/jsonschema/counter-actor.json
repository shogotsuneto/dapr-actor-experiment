{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/shogotsuneto/dapr-actor-experiment/schemas/counter-actor",
  "title": "CounterActor Schema",
  "description": "JSON Schema definition for CounterActor data types and validation rules",
  "type": "object",
  "definitions": {
    "CounterState": {
      "type": "object",
      "title": "Counter State",
      "description": "Current state of the counter actor",
      "properties": {
        "value": {
          "type": "integer",
          "format": "int32",
          "description": "The current counter value",
          "minimum": -2147483648,
          "maximum": 2147483647
        }
      },
      "required": ["value"],
      "additionalProperties": false,
      "examples": [
        {"value": 0},
        {"value": 42},
        {"value": -10}
      ]
    },
    "SetValueRequest": {
      "type": "object",
      "title": "Set Value Request",
      "description": "Request to set the counter to a specific value",
      "properties": {
        "value": {
          "type": "integer",
          "format": "int32",
          "description": "The value to set the counter to",
          "minimum": -2147483648,
          "maximum": 2147483647
        }
      },
      "required": ["value"],
      "additionalProperties": false,
      "examples": [
        {"value": 100},
        {"value": 0},
        {"value": -50}
      ]
    },
    "ErrorResponse": {
      "type": "object",
      "title": "Error Response",
      "description": "Standard error response format",
      "properties": {
        "error": {
          "type": "string",
          "description": "Human-readable error message",
          "minLength": 1
        },
        "code": {
          "type": "string",
          "description": "Machine-readable error code",
          "pattern": "^[A-Z_]+$",
          "examples": ["INVALID_INPUT", "INTERNAL_ERROR", "NOT_FOUND"]
        },
        "details": {
          "type": "object",
          "description": "Additional error details",
          "additionalProperties": true
        }
      },
      "required": ["error"],
      "additionalProperties": false
    },
    "ActorId": {
      "type": "string",
      "title": "Actor ID",
      "description": "Unique identifier for the actor instance",
      "pattern": "^[a-zA-Z0-9_-]+$",
      "minLength": 1,
      "maxLength": 50,
      "examples": ["counter-1", "user-123", "session-abc"]
    }
  },
  "properties": {
    "counterState": {
      "$ref": "#/definitions/CounterState"
    },
    "setValueRequest": {
      "$ref": "#/definitions/SetValueRequest"
    },
    "errorResponse": {
      "$ref": "#/definitions/ErrorResponse"
    },
    "actorId": {
      "$ref": "#/definitions/ActorId"
    }
  },
  "anyOf": [
    {"required": ["counterState"]},
    {"required": ["setValueRequest"]},
    {"required": ["errorResponse"]},
    {"required": ["actorId"]}
  ]
}