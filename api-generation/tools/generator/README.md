# API Code Generator

> **Note**: This documentation was largely generated by AI to provide comprehensive examples and explanations.

This tool generates Go types and interfaces from OpenAPI specifications, providing true contract-first development with compile-time validation.

## Features

- **Consolidated Generator**: Single tool that generates both types and interfaces
- **External Templates**: Template strings are externalized for better code navigation
- **Contract Enforcement**: Generated interfaces ensure implementation compliance
- **Template-Based**: Uses Go templates for flexible code generation

## Directory Structure

```
generator/
├── main.go                    # Main generator application
├── templates/                 # External template files
│   ├── types.tmpl            # Types generation template
│   └── interface.tmpl        # Interface generation template
├── go.mod                    # Go module definition
└── go.sum                    # Go module checksums
```

## Usage

```bash
# Build the generator
go build -o ../bin/generator .

# Generate code from OpenAPI schema
generator <openapi-file> <package-name> <output-dir>
```

## Template System

Templates are externalized for better maintainability:

- `types.tmpl`: Generates Go structs from OpenAPI schema components
- `interface.tmpl`: Generates contract interfaces from OpenAPI operations

The generator automatically resolves template paths in multiple locations:
1. Relative to the executable binary
2. Current working directory (development mode)
3. Project structure search (fallback)

## Generated Output

For each OpenAPI specification, the generator creates:

- `types.go`: Go structs for all schema components
- `interface.go`: Contract interface defining required methods

## Integration

The generator is integrated into the build system via:
- `../scripts/install.sh`: Builds and installs the generator
- `../scripts/generate.sh`: Runs code generation for OpenAPI schemas

## Template Customization

Templates can be customized by editing the `.tmpl` files. The generator uses standard Go `text/template` syntax with the following data structures:

### Types Template Data
```go
type TypesTemplateData struct {
    PackageName string
    Types       []TypeDef
    TypeAliases []TypeAlias
}
```

### Interface Template Data
```go
type InterfaceTemplateData struct {
    PackageName string
    Methods     []Method
}
```