# API Generation Examples

A minimal demo of Dapr actors application in Go, demonstrating actor state management and method invocation patterns with schema-first development.

> **Note**: This documentation was largely generated by AI to provide comprehensive examples and explanations.

This directory contains examples demonstrating schema-first development using OpenAPI 3.0 specifications.

## Quick Start Example

```bash
# 1. Install tools
cd api-generation
./tools/scripts/install.sh

# 2. Generate from OpenAPI
./tools/scripts/generate.sh openapi schemas/openapi/multi-actors.yaml

# 3. See generated code
ls -la ../internal/generated/openapi/

# 4. Build with schema-based implementation
cd .. && go build -o bin/server ./cmd/server
```

## Example: OpenAPI â†’ Go Implementation

### 1. Start with the Schema

```yaml
# schemas/openapi/multi-actors.yaml
openapi: 3.0.3
info:
  title: CounterActor API
  version: 1.0.0
paths:
  /{actorId}/method/increment:
    post:
      operationId: incrementCounter
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  value:
                    type: integer
```

### 2. Generate and Implement

```bash
./tools/scripts/generate.sh openapi schemas/openapi/multi-actors.yaml
```

```go
// internal/actor/counter.go
import "github.com/shogotsuneto/dapr-actor-experiment/internal/generated/openapi"

func (c *CounterActor) Increment(ctx context.Context) (*openapi.CounterState, error) {
    // Implementation MUST match the OpenAPI schema
    return &openapi.CounterState{Value: 42}, nil
}
```

## Key Takeaways

1. **OpenAPI Implementation**: Currently, only OpenAPI 3.0 generation is fully implemented and tested
2. **Generated Code**: Custom generators using `kin-openapi` produce clean, type-safe Go code
3. **Type Safety**: OpenAPI generation provides compile-time type safety
4. **Future Expansion**: Other schema types could be added when needed

This demonstrates the power of schema-first development: define your API once, generate type-safe code, implement with confidence.